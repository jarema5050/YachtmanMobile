{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/jedrzej/Documents/GitHub/YachtmanMobile/components/homeStack.js\";\nimport React, { useState } from 'react';\nimport AsyncStorage from '@react-native-community/async-storage';\nimport BottomTabNav from \"./BottomTabNav\";\nimport IntroView from \"../views/IntroductionView\";\nimport { NavigationContainer } from '@react-navigation/native';\nimport LoginContext from \"../Contexts/LoginContext\";\n\nfunction homeStack() {\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      showIntro = _useState2[0],\n      setShowIntro = _useState2[1];\n\n  function changeView() {\n    var getJwt = function getJwt() {\n      var jsonValue;\n      return _regeneratorRuntime.async(function getJwt$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@auth_jwt'));\n\n            case 3:\n              jsonValue = _context.sent;\n              return _context.abrupt(\"return\", jsonValue != null ? JSON.parse(jsonValue) : null);\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 7]], Promise);\n    };\n\n    getJwt().then(function (result) {\n      if (result == null) setShowIntro(true);else setShowIntro(false);\n    });\n  }\n\n  function logoutEffect() {\n    return _regeneratorRuntime.async(function logoutEffect$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setShowIntro(true);\n            _context2.prev = 1;\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(AsyncStorage.removeItem('@auth_jwt'));\n\n          case 4:\n            return _context2.abrupt(\"return\", true);\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](1);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[1, 7]], Promise);\n  }\n\n  if (showIntro) return React.createElement(IntroView, {\n    task: changeView,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 16\n    }\n  });else return React.createElement(LoginContext.Provider, {\n    value: {\n      logoutFunc: logoutEffect\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, React.createElement(NavigationContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, React.createElement(BottomTabNav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 15\n    }\n  })));\n}\n\nexport default homeStack;","map":{"version":3,"sources":["/Users/jedrzej/Documents/GitHub/YachtmanMobile/components/homeStack.js"],"names":["React","useState","AsyncStorage","BottomTabNav","IntroView","NavigationContainer","LoginContext","homeStack","showIntro","setShowIntro","changeView","getJwt","getItem","jsonValue","JSON","parse","then","result","logoutEffect","removeItem","logoutFunc"],"mappings":";;;AACA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,YAAP,MAAyB,uCAAzB;AACA,OAAOC,YAAP;AACA,OAAOC,SAAP;AACA,SAASC,mBAAT,QAAoC,0BAApC;AACA,OAAOC,YAAP;;AACA,SAASC,SAAT,GAAoB;AAAA,kBAEkBN,QAAQ,CAAC,IAAD,CAF1B;AAAA;AAAA,MAETO,SAFS;AAAA,MAEEC,YAFF;;AAGhB,WAASC,UAAT,GAAqB;AACjB,QAAMC,MAAM,GAAG,SAATA,MAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAEeT,YAAY,CAACU,OAAb,CAAqB,WAArB,CAFf;;AAAA;AAEHC,cAAAA,SAFG;AAAA,+CAGFA,SAAS,IAAI,IAAb,GAAoBC,IAAI,CAACC,KAAL,CAAWF,SAAX,CAApB,GAA4C,IAH1C;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAf;;AASAF,IAAAA,MAAM,GAAGK,IAAT,CAAc,UAACC,MAAD,EAAY;AACtB,UAAGA,MAAM,IAAI,IAAb,EACIR,YAAY,CAAC,IAAD,CAAZ,CADJ,KAGIA,YAAY,CAAC,KAAD,CAAZ;AACP,KALD;AAMH;;AACD,WAAeS,YAAf;AAAA;AAAA;AAAA;AAAA;AACET,YAAAA,YAAY,CAAC,IAAD,CAAZ;AADF;AAAA;AAAA,6CAGUP,YAAY,CAACiB,UAAb,CAAwB,WAAxB,CAHV;;AAAA;AAAA,8CAIW,IAJX;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAYA,MAAGX,SAAH,EACI,OAAO,oBAAC,SAAD;AAAW,IAAA,IAAI,EAAEE,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP,CADJ,KAGG,OACC,oBAAC,YAAD,CAAc,QAAd;AAAuB,IAAA,KAAK,EAAE;AAACU,MAAAA,UAAU,EAAEF;AAAb,KAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADF,CADD;AAON;;AAED,eAAeX,SAAf","sourcesContent":["\nimport React, {useState} from 'react';\nimport AsyncStorage from '@react-native-community/async-storage';\nimport BottomTabNav from './BottomTabNav';\nimport IntroView from '../views/IntroductionView';\nimport { NavigationContainer } from '@react-navigation/native';\nimport LoginContext from '../Contexts/LoginContext'\nfunction homeStack(){\n\n    const [showIntro, setShowIntro] = useState(true);\n    function changeView(){\n        const getJwt = async () => {\n            try {\n              const jsonValue = await AsyncStorage.getItem('@auth_jwt')\n              return jsonValue != null ? JSON.parse(jsonValue) : null;\n            } catch(e) {\n              // error reading value\n            }\n          }\n    \n        getJwt().then((result) => {\n            if(result == null)\n                setShowIntro(true);\n            else\n                setShowIntro(false);\n        })\n    }\n    async function logoutEffect(){\n      setShowIntro(true);\n      try {\n        await AsyncStorage.removeItem('@auth_jwt')\n        return true\n      } catch(e) {\n        // error reading value\n      }\n    }\n    //const LoginContext = React.createContext(defaultValue);\n    \n    \n    if(showIntro)\n        return(<IntroView task={changeView}></IntroView>);\n    else\n       return(\n        <LoginContext.Provider value={{logoutFunc: logoutEffect}}>\n          <NavigationContainer>\n              <BottomTabNav></BottomTabNav>\n            </NavigationContainer>\n        </LoginContext.Provider>\n        );\n}\n\nexport default homeStack;"]},"metadata":{},"sourceType":"module"}